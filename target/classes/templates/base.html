<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

  <head th:fragment="head">
    <meta charset="UTF-8" />
    <title th:text="${tituloWeb}">Algo porque no se lo he pasado</title>            
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <link href="/webjars/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <script src="/webjars/jquery/jquery.min.js"></script>
        <script src="/webjars/bootstrap/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="/css/miEstilo.css">
          </head>

          <block th:fragment="heakConFecha">
            <meta charset="UTF-8" />
            <title th:text="${tituloWeb}">Algo porque no se lo he pasado</title>    
            <meta name="viewport" content="width=device-width, initial-scale=1">
              <link href="/webjars/bootstrap/css/bootstrap.min.css" rel="stylesheet">
                <script src="/webjars/jquery/jquery.min.js"></script>
                <script src="/webjars/bootstrap/js/bootstrap.min.js"></script>     
                <script src="/webjars/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>        
                <link href="/webjars/bootstrap-datepicker/css/bootstrap-datepicker.min.css" rel="stylesheet">
                  <script src="/webjars/bootstrap-datepicker/locales/bootstrap-datepicker.es.min.js"></script>   
                  <link rel="stylesheet" href="/css/miEstilo.css">
                    </block>

                    <body>

                      <div th:fragment="cabecera" class="jumbotron text-center" style="margin-bottom:0">
                        <h1 th:text="${titulo}"></h1>
                        <p th:text="${subtitulo}"></p> 
                      </div>

                      <nav th:fragment="barra" class="navbar navbar-expand-sm bg-dark navbar-dark sticky-top">
                        <a class="navbar-brand" href="/">Inicio</a>                        
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                          <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="collapsibleNavbar">
                          <ul class="navbar-nav">  

                            <!-- Dropdown -->
                            <li class="nav-item dropdown">
                              <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                                Sesión
                              </a>
                              <div class="dropdown-menu">
                                <a class="dropdown-item" th:href="@{/registeruser}">Registro usuario</a>
                                <div sec:authorize="!isAuthenticated()">
                                  <a class="dropdown-item" th:href="@{/login}">Iniciar sesión</a>
                                </div>
                                <div sec:authorize="isAuthenticated()">      
                                  <a class="dropdown-item" th:href="@{/logout}">Cerrar sesión <span sec:authentication="name"></a>
                                </div> 
                                <div sec:authorize="hasAnyAuthority('ADMIN')">
                                  <a class="dropdown-item" th:href="@{/register}">Registro administrador</a>
                                </div>
                              </div>
                            </li>

                            <!-- Dropdown -->


                            <div sec:authorize="isAuthenticated()">      
                              <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                                  Contacto
                                </a>
                                <div class="dropdown-menu">
                                  <a class="dropdown-item" th:href="@{/admin/enviarcorreo/adjunto}">Enviar email con adjunto</a>
                                  <a class="dropdown-item" th:href="@{/admin/enviarcorreo}">Enviar email</a>
                                  <a class="dropdown-item" th:href="@{/admin/upload}">Subir archivo</a>
                                  <a class="dropdown-item" th:href="@{/chart}">Gráficas</a>
                                </div>
                              </li>
                            </div>


                            <div sec:authorize="hasAnyAuthority('ADMIN')">
                              <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                                  Clientes e Informes
                                </a>
                                <div class="dropdown-menu">
                                  <a class="dropdown-item" th:href="@{/clientes/listar}">Listado de clientes</a>
                                  <a class="dropdown-item" th:href="@{/clientes/create}">Crear cliente</a>
                                  <a class="dropdown-item" th:href="@{/informes/listar}">Listado de informes</a>
                                  <a class="dropdown-item" th:href="@{/informes/create}">Crear informes</a>
                                </div>
                              </li>
                            </div>

                            <div sec:authorize="hasAnyAuthority('ADMIN')">
                              <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                                  Países y capitales
                                </a>
                                <div class="dropdown-menu">
                                  <a class="dropdown-item" th:href="@{/pais/listar}">Listado de países</a>
                                  <a class="dropdown-item" th:href="@{/pais/crear}">Crear país</a>
                                  <a class="dropdown-item" th:href="@{/pais/capital/listar}">Listado de capitales</a>
                                  <a class="dropdown-item" th:href="@{/pais/capital/crear}">Crear capital</a>
                                </div>
                              </li>
                            </div>

                            <div sec:authorize="hasAnyAuthority('ADMIN')">
                              <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                                  Customers e Invoices
                                </a>
                                <div class="dropdown-menu">
                                  <a class="dropdown-item" th:href="@{/customer/listar}">Listado de Customers</a>
                                  <a class="dropdown-item" th:href="@{/customer/crear}">Crear Customer</a>
                                  <a class="dropdown-item" th:href="@{/invoice/listar}">Listado de Invoices</a>
                                  <a class="dropdown-item" th:href="@{/invoice/crear}">Crear Invoice</a>
                                </div>
                              </li>
                            </div>

                            <li class="nav-item">
                              <a class="nav-link" href="/public/sobrenosotros">Sobre nosotros</a>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link" href="/public/nuestraempresa">Nuestra empresa</a>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link" href="/public/servicios">Servicios</a>
                            </li>
                            <div sec:authorize="hasAnyAuthority('ADMIN','USER')">
                              <li class="nav-item">
                                <a class="nav-link" href="/public/tusservicios">Tus Servicios</a>
                              </li>
                            </div>
                        </div>


                        </ul>
                        </div>
                      </nav>

                      <div class="container" style="margin-top:30px">



                      </div>
                      <div th:fragment="footer">
                        <div class="jumbotron text-center" style="margin-bottom:0">
                          <p>Gregorio Martínez &COPY; 2020</p>
                        </div>
                      </div>

                    </body>
                    </html>
