<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
  <head th:replace="base::head"><title></title></head>
  <body>
    <link rel="stylesheet" href="/css/logger.css"/>
    <div th:replace="base::cabecera"></div>
    <nav th:replace="base::barra"></nav>

    <div class="container">
      <br/><br/>
      <div class="container h-100">
        <div class="d-flex justify-content-center h-100">
          <div class="user_card">
            <div class="d-flex justify-content-center">
              <div class="brand_logo_container">
                <img src="/img/login.jpg" class="brand_logo" alt="Logo">
              </div>
            </div>


            <div sec:authorize="!isAuthenticated()"><!-- Se muestra si no ha iniciado sesión -->
              <div class="d-flex justify-content-center form_container">
                <form th:action="@{/login}" method="post">
                  <div class="input-group mb-3">
                    <div class="input-group-append">
                      <span class="input-group-text"><i class="fas fa-user"></i></span>
                    </div>
                    <input type="text" name="username" class="form-control input_user" value="" placeholder="username">
                  </div>
                  <div class="input-group mb-2">
                    <div class="input-group-append">
                      <span class="input-group-text"><i class="fas fa-key"></i></span>
                    </div>
                    <input type="password" name="password" class="form-control input_pass" value="" placeholder="password">
                  </div>

                  <div class="d-flex justify-content-center mt-3 login_container">
                    <button type="submit" name="button" class="btn login_btn">Login</button>
                  </div>
                </form>
              </div>
            </div>
            <div sec:authorize="isAuthenticated()">
              <div class="row">&zwj;</div>
              <div class="row">
                <div class="col-lg-12" style="text-align: center">
                  Hola <span sec:authentication="name"></span>.<br>
                    Tienes el rol de <span sec:authentication="principal.authorities"></span>
                </div>
              </div>
              <div class="row">&zwj;</div>
            </div>

            <div class="mt-4">
              <div class="d-flex justify-content-center links">
                <p class="bg-info text-white" th:text="${message}"></p>
              </div>
              <div class="d-flex justify-content-center links">
                <p class="bg-danger text-white" th:if="${param.error}">Datos incorrectos</p>
              </div>
              <div class="d-flex justify-content-center links">
                <p class="bg-info text-white" th:if="${param.logout}">Has cerrado sesión</p>
              </div>
              <div class="d-flex justify-content-center links">
                <p class="bg-info text-white" th:if="${param.iniciado}">Se ha iniciado sesión correctamente</p>
              </div>
              <br>
                <div sec:authorize="!isAuthenticated()"><!-- Se muestra si no ha iniciado sesión -->
                  <div class="d-flex justify-content-center links">
                    ¿No tiene una cuenta? <a th:href="@{/registeruser}" class="ml-2">Regístrese</a>
                  </div>
                </div>
                <div sec:authorize="isAuthenticated()"><!-- Se muestra si no ha iniciado sesión -->
                  <div class="d-flex justify-content-center links">
                    <a th:href="@{/logout}" role="button" class="btn btn-lg btn-outline-dark btn-block">Cerrar sesión</a>
                  </div>
                </div>
                <!--<div class="d-flex justify-content-center links">
                  <a href="#">¿Olvidó su contraseña?</a>
                </div>-->
            </div>
          </div>
        </div>
      </div>
      <br/><br/>
    </div>
    <div th:replace="base::footer"></div>
  </body>
</html>